{% extends "base.html" %}
{% block scripts %}
    <script src="{% static "js/bootstrap-table.min.js" %}"></script>
    <script src="{% static "js/bootstrap-table-nb-NO.min.js" %}"></script>
    <script>
        $(document).ready(function() {
            $('#table').bootstrapTable({
                url: '/pol/produkter/' + '?{{ request.GET.urlencode }}',
                columns: [
                    {
                        field: 'attributes.varenavn',
                        title: 'Navn',
                        sortable: 'true',
                    }, {
                        field: 'attributes.varetype',
                        title: 'Type',
                        sortable: 'true',
                    }, {
                        field: 'attributes.pris',
                        title: 'Pris',
                        sortable: 'true',
                    }, {
                        field: 'attributes.volum',
                        title: 'Volum',
                        sortable: 'true',
                    }, {
                        field: 'attributes.alkohol',
                        title: 'Alkohol',
                        sortable: 'true',
                    }, {
                        field: 'attributes.enhetspris',
                        title: 'kr/cl Alkohol',
                        sortable: 'true',
                    },
                ],
            });
            $(".filterform").change(function(){
                $(".filterform").submit(function() {
                    $.ajax({
                        type: "GET",
                        url: '/pol/produkter/',
                        data:$(".filterform").serialize(),
                        success: function(data) {
                            $('#table').bootstrapTable('load', data);
                        },
                        error: function(jqXHR, text, error){
                            $('#table').html(error);
                            console.log("error");
                        }
                    });
                    return false;
                });
            });
        });
    </script>
{% endblock scripts %}
{% block sidebar %}
    <form class="filterform" method="get" action="">
        <div class="form-group">{{ varenavnform }}</div>
        <div id="varetypeform" class="form-group collapse">{{ varetypeform }}</div>
        <a class="btn btn-link" data-toggle="collapse" data-target="#varetypeform">Mer</a>
        <div class="form-group">{{ prisform }}</div>
        <div class="form-group">{{ volumform }}</div>
        <div class="form-group">{{ alkoholform }}</div>
        <div class="form-group">{{ enhetsprisform }}</div>
        <div class="form-group">{{ sorteringsform }}</div>
        <input class="btn btn-default" type="submit">
        <div style="clear: both"></div>
    </form>
{% endblock sidebar %}
{% block content %}
    <table id="table"></table>
{% endblock content %}